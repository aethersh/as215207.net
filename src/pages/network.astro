---
import Pride from "../components/Pride.astro";
import RootLayout from "../layouts/RootLayout.astro";
import { getCollection } from "astro:content";

const pops = await getCollection("pop");
const prefixes = await getCollection("prefix");
---

<RootLayout>
  <div
    class="w-screen min-h-screen overflow-x-hidden flex flex-col items-center justify-start"
  >
    <main
      class="flex flex-col items-start md:px-4 px-2 pt-4 md:pt-0 max-w-3xl md:w-3xl w-screen font-mono"
    >
      <nav
        class="justify-around items-center md:gap-x-2 gap-x-1 py-2 flex w-full"
      >
        <a href="/">home</a>
        <a href="/peering">peering</a>
      </nav>
      <h2 class="text-3xl font-medium text-center w-full">Network</h2>
      <h3 class="text-xl text-center w-full pt-2">AS215207</h3>

      <div class="flex md:flex-row flex-col justify-around w-full pt-4">
        <div class="flex flex-col md:basis-1/2 shrink-0">
          <h4 class="text-lg text-center w-full pt-4">Points of Presence</h4>
          <ul class="list-none text-center list-inside w-full">
            {
              pops.map((pop) => (
                <li>
                  <a href={`/network/${pop.data.serverName}`}>
                    {pop.data.serverName}
                  </a>{" "}
                  - {pop.data.location}
                </li>
              ))
            }
          </ul>
        </div>
        <div class="flex flex-col md:basis-1/2 shrink-0">
          <h4
            class="text-lg text-center w-full pt-4 col-span-1 row-start-1 row-span-1"
          >
            Prefixes
          </h4>
          <ul
            class="list-none text-center list-inside w-full col-start-2 col-span-1 row-start-2 row-span-1"
          >
            {
              prefixes.map((prefix) => (
                <li>
                  <a href={`/network/${prefix.data.prefix}`}>
                    {prefix.data.prefix}
                  </a>{" "}
                </li>
              ))
            }
          </ul>
        </div>
      </div>

      <nav
        class="justify-center items-center md:gap-x-4 gap-x-1 sm:gap-y-0 gap-y-2 py-4 flex sm:flex-wrap sm:flex-row flex-col w-full"
      >
        <h4 class="sm:basis-full shrink-0 text-center">links</h4>
        <a target="_blank" href="https://www.peeringdb.com/net/35756"
          >PeeringDB</a
        >
        <a target="_blank" href="https://bgp.tools/as/215207">bgp.tools</a>
        <a target="_blank" href="https://bgp.he.net/AS215207">bgp.he.net</a>
      </nav>

      <Pride />
    </main>
  </div>
</RootLayout>
